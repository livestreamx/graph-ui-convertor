{
  "markup_type": "service",
  "finedog_unit_meta": {
    "service_name": "Checkout Service",
    "criticality_level": "AC",
    "team_id": "team-alpha",
    "team_name": "Core Payments"
  },
  "procedures": [
    {
      "procedure_id": "pay_intake",
      "procedure_name": "Payment Intake",
      "start_block_ids": ["pi_start"],
      "end_block_ids": ["pi_done::end"],
      "branches": {
        "pi_start": ["pi_validate", "pi_hold"],
        "pi_validate": ["pi_done"],
        "pi_hold": ["pi_done"]
      },
      "block_id_to_block_name": {
        "pi_start": "Receive payment",
        "pi_validate": "Validate card",
        "pi_hold": "3DS challenge",
        "pi_done": "Payment accepted"
      }
    },
    {
      "procedure_id": "kyc_check",
      "procedure_name": "KYC Check",
      "start_block_ids": ["kyc_start"],
      "end_block_ids": ["kyc_finish::exit"],
      "branches": {
        "kyc_start": ["kyc_collect"],
        "kyc_collect": ["kyc_finish"]
      },
      "block_id_to_block_name": {
        "kyc_start": "Collect identity",
        "kyc_collect": "Verify documents",
        "kyc_finish": "KYC complete"
      }
    },
    {
      "procedure_id": "capture_funds",
      "procedure_name": "Capture Funds",
      "start_block_ids": ["cap_start"],
      "end_block_ids": ["cap_done::end"],
      "branches": {
        "cap_start": ["cap_charge"],
        "cap_charge": ["cap_done"]
      },
      "block_id_to_block_name": {
        "cap_start": "Prepare capture",
        "cap_charge": "Capture funds",
        "cap_done": "Receipt ready"
      }
    }
  ],
  "procedure_graph": {
    "pay_intake": ["kyc_check"],
    "kyc_check": ["capture_funds", "pay_intake"],
    "capture_funds": []
  }
}
