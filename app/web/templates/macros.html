{% macro render_group(group, group_query_base) %}
  <section class="group">
    <div class="group-header">
      <div>
        <div class="group-title">
          {{ group.field | humanize_text }}: {{ group.display_value | humanize_text }}
        </div>
        <div class="group-count">{{ group.count }} scenes</div>
      </div>
      <a
        class="group-filter"
        href="/catalog{% if group_query_base %}?{{ group_query_base }}&group={{ group.field | urlencode }}:{{ group.value | urlencode }}{% else %}?group={{ group.field | urlencode }}:{{ group.value | urlencode }}{% endif %}"
      >
        Filter
      </a>
    </div>
    {% if group.children %}
      <div class="group-children">
        {% for child in group.children %}
          {{ render_group(child, group_query_base) }}
        {% endfor %}
      </div>
    {% else %}
      <div class="card-grid">
        {% for item in group.items %}
          <article class="card">
            <div class="card-body">
              <div class="card-title">{{ item.title }}</div>
              <div class="card-meta">
                <span>
                  {{ "markup_type" | humanize_text }}: {{ item.markup_type | humanize_text }}
                </span>
                <span>Created {{ item.created_at | msk_datetime }}</span>
                <span>Updated {{ item.updated_at | msk_datetime }}</span>
              </div>
              {% if item.tags %}
                <div class="tag-row">
                  {% for tag in item.tags %}
                    <span class="tag">{{ tag }}</span>
                  {% endfor %}
                </div>
              {% endif %}
            </div>
            <div class="card-actions">
              <a class="primary-button" href="/catalog/{{ item.scene_id }}">View</a>
              <a class="ghost-button" href="/api/scenes/{{ item.scene_id }}?download=true">Download</a>
            </div>
          </article>
        {% endfor %}
      </div>
    {% endif %}
  </section>
{% endmacro %}
